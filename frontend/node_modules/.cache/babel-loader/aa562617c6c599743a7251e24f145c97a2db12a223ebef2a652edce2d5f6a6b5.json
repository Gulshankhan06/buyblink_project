{"ast":null,"code":"import{useParams}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BuyProduct(){const{id}=useParams();const[product,setProduct]=useState(null);// Fetch single product by ID\nuseEffect(()=>{fetch(\"http://localhost:5000/api/products/\".concat(id)).then(res=>res.json()).then(data=>setProduct(data)).catch(err=>console.log(err));},[id]);// ---------------------- Razorpay Online Payment -------------------------\nconst startRazorpay=async()=>{if(!product)return;const res=await fetch(\"http://localhost:5000/api/payment/order\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({amount:product.price})});const order=await res.json();const options={key:\"RAZORPAY_KEY_ID\",//\namount:order.amount,currency:\"INR\",name:\"BuyBlink Store\",description:\"Payment for \".concat(product.name),order_id:order.id,handler:function(response){alert(\"Payment Successful! Payment ID: \"+response.razorpay_payment_id);},prefill:{name:\"Customer Name\",email:\"customer@example.com\",contact:\"9999999999\"},theme:{color:\"#3399cc\"}};const rzp=new window.Razorpay(options);rzp.open();};// ------------- PhonePe / Paytm / Google Pay UPI Intent Payment -----------\nconst handleUPI=()=>{if(!product)return;const upiID=\"yourupiid@bank\";//\nconst amount=product.price;const name=product.name;const upiLink=\"upi://pay?pa=\".concat(upiID,\"&pn=\").concat(name,\"&am=\").concat(amount,\"&cu=INR\");window.location.href=upiLink;// PhonePe / Paytm / Google Pay open ho jayega\n};// ----------------------------- COD --------------------------------------\nconst handleCOD=()=>{alert(\"Order placed successfully (Cash on Delivery)\");};if(!product)return/*#__PURE__*/_jsx(\"h2\",{style:{padding:20},children:\"Loading Product...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"40px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Buy Product\"}),/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,width:\"300\",style:{borderRadius:\"10px\",marginBottom:\"20px\"}}),/*#__PURE__*/_jsx(\"h2\",{children:product.name}),/*#__PURE__*/_jsxs(\"h3\",{style:{color:\"green\"},children:[\"\\u20B9\",product.price]}),/*#__PURE__*/_jsx(\"p\",{style:{maxWidth:\"500px\",margin:\"10px auto\"},children:product.discription}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:startRazorpay,style:{padding:\"10px 20px\",margin:\"10px\",cursor:\"pointer\"},children:\"Pay Online (Razorpay)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUPI,style:{padding:\"10px 20px\",margin:\"10px\",cursor:\"pointer\"},children:\"Pay Using PhonePe / Paytm / Google Pay\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCOD,style:{padding:\"10px 20px\",margin:\"10px\",cursor:\"pointer\"},children:\"Cash on Delivery\"})]});}","map":{"version":3,"names":["useParams","useEffect","useState","jsx","_jsx","jsxs","_jsxs","BuyProduct","id","product","setProduct","fetch","concat","then","res","json","data","catch","err","console","log","startRazorpay","method","headers","body","JSON","stringify","amount","price","order","options","key","currency","name","description","order_id","handler","response","alert","razorpay_payment_id","prefill","email","contact","theme","color","rzp","window","Razorpay","open","handleUPI","upiID","upiLink","location","href","handleCOD","style","padding","children","textAlign","src","image","alt","width","borderRadius","marginBottom","maxWidth","margin","discription","onClick","cursor"],"sources":["C:/Users/Gulshan/Downloads/buyblink_project/frontend/src/pages/BuyProduct.jsx"],"sourcesContent":["import { useParams } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function BuyProduct() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n\r\n  // Fetch single product by ID\r\n  useEffect(() => {\r\n    fetch(`http://localhost:5000/api/products/${id}`)\r\n      .then((res) => res.json())\r\n      .then((data) => setProduct(data))\r\n      .catch((err) => console.log(err));\r\n  }, [id]);\r\n\r\n  // ---------------------- Razorpay Online Payment -------------------------\r\n  const startRazorpay = async () => {\r\n    if (!product) return;\r\n\r\n    const res = await fetch(\"http://localhost:5000/api/payment/order\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ amount: product.price }),\r\n    });\r\n\r\n    const order = await res.json();\r\n\r\n    const options = {\r\n      key: \"RAZORPAY_KEY_ID\", //\r\n      amount: order.amount,\r\n      currency: \"INR\",\r\n      name: \"BuyBlink Store\",\r\n      description: `Payment for ${product.name}`,\r\n      order_id: order.id,\r\n      handler: function (response) {\r\n        alert(\r\n          \"Payment Successful! Payment ID: \" + response.razorpay_payment_id\r\n        );\r\n      },\r\n      prefill: {\r\n        name: \"Customer Name\",\r\n        email: \"customer@example.com\",\r\n        contact: \"9999999999\",\r\n      },\r\n      theme: { color: \"#3399cc\" },\r\n    };\r\n\r\n    const rzp = new window.Razorpay(options);\r\n    rzp.open();\r\n  };\r\n\r\n  // ------------- PhonePe / Paytm / Google Pay UPI Intent Payment -----------\r\n  const handleUPI = () => {\r\n    if (!product) return;\r\n\r\n    const upiID = \"yourupiid@bank\"; //\r\n    const amount = product.price;\r\n    const name = product.name;\r\n\r\n    const upiLink = `upi://pay?pa=${upiID}&pn=${name}&am=${amount}&cu=INR`;\r\n    window.location.href = upiLink; // PhonePe / Paytm / Google Pay open ho jayega\r\n  };\r\n\r\n  // ----------------------------- COD --------------------------------------\r\n  const handleCOD = () => {\r\n    alert(\"Order placed successfully (Cash on Delivery)\");\r\n  };\r\n\r\n  if (!product) return <h2 style={{ padding: 20 }}>Loading Product...</h2>;\r\n\r\n  return (\r\n    <div style={{ padding: \"40px\", textAlign: \"center\" }}>\r\n      <h1>Buy Product</h1>\r\n\r\n      <img\r\n        src={product.image}\r\n        alt={product.name}\r\n        width=\"300\"\r\n        style={{ borderRadius: \"10px\", marginBottom: \"20px\" }}\r\n      />\r\n\r\n      <h2>{product.name}</h2>\r\n      <h3 style={{ color: \"green\" }}>â‚¹{product.price}</h3>\r\n      <p style={{ maxWidth: \"500px\", margin: \"10px auto\" }}>\r\n        {product.discription}\r\n      </p>\r\n\r\n      <br />\r\n\r\n      <button\r\n        onClick={startRazorpay}\r\n        style={{\r\n          padding: \"10px 20px\",\r\n          margin: \"10px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Pay Online (Razorpay)\r\n      </button>\r\n\r\n      <button\r\n        onClick={handleUPI}\r\n        style={{\r\n          padding: \"10px 20px\",\r\n          margin: \"10px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Pay Using PhonePe / Paytm / Google Pay\r\n      </button>\r\n\r\n      <button\r\n        onClick={handleCOD}\r\n        style={{\r\n          padding: \"10px 20px\",\r\n          margin: \"10px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Cash on Delivery\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}