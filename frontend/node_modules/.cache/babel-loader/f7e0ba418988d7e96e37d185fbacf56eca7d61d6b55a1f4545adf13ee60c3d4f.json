{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import ProductCard from\"../components/ProductCard\";import CategoryBar from\"../components/CategoryBar\";import\"../styles/product.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Products(){const[products,setProducts]=useState([]);const[category,setCategory]=useState(\"all\");const location=useLocation();const navigate=useNavigate();/* ðŸ”¹ URL se category read karna */useEffect(()=>{const params=new URLSearchParams(location.search);const cat=params.get(\"category\");if(cat){setCategory(cat.toLowerCase());}else{setCategory(\"all\");}},[location.search]);/* ðŸ”¹ Products fetch */useEffect(()=>{fetch(\"http://localhost:5000/api/products\").then(res=>res.json()).then(data=>setProducts(data)).catch(()=>setProducts([]));},[]);/* ðŸ”¹ Category click  URL update */const handleCategoryChange=cat=>{setCategory(cat);if(cat===\"all\"){navigate(\"/products\");}else{navigate(\"/products?category=\".concat(cat));}};/* ðŸ”¹ Filter logic (STRICT & SAFE) */const filteredProducts=category===\"all\"?products:products.filter(p=>p.category&&p.category.toLowerCase()===category);return/*#__PURE__*/_jsxs(\"div\",{className:\"product-page\",children:[/*#__PURE__*/_jsx(CategoryBar,{setCategory:handleCategoryChange}),/*#__PURE__*/_jsx(\"div\",{className:\"product-grid\",children:filteredProducts.length>0?filteredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product},product._id)):/*#__PURE__*/_jsx(\"p\",{className:\"no-products\",children:\"No products found\"})})]});}","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","ProductCard","CategoryBar","jsx","_jsx","jsxs","_jsxs","Products","products","setProducts","category","setCategory","location","navigate","params","URLSearchParams","search","cat","get","toLowerCase","fetch","then","res","json","data","catch","handleCategoryChange","concat","filteredProducts","filter","p","className","children","length","map","product","_id"],"sources":["C:/Users/Gulshan/Downloads/buyblink_project/frontend/src/pages/Products.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport ProductCard from \"../components/ProductCard\";\nimport CategoryBar from \"../components/CategoryBar\";\nimport \"../styles/product.css\";\n\nexport default function Products() {\n  const [products, setProducts] = useState([]);\n  const [category, setCategory] = useState(\"all\");\n\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  /* ðŸ”¹ URL se category read karna */\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const cat = params.get(\"category\");\n\n    if (cat) {\n      setCategory(cat.toLowerCase());\n    } else {\n      setCategory(\"all\");\n    }\n  }, [location.search]);\n\n  /* ðŸ”¹ Products fetch */\n  useEffect(() => {\n    fetch(\"http://localhost:5000/api/products\")\n      .then((res) => res.json())\n      .then((data) => setProducts(data))\n      .catch(() => setProducts([]));\n  }, []);\n\n  /* ðŸ”¹ Category click  URL update */\n  const handleCategoryChange = (cat) => {\n    setCategory(cat);\n    if (cat === \"all\") {\n      navigate(\"/products\");\n    } else {\n      navigate(`/products?category=${cat}`);\n    }\n  };\n\n  /* ðŸ”¹ Filter logic (STRICT & SAFE) */\n  const filteredProducts =\n    category === \"all\"\n      ? products\n      : products.filter(\n          (p) => p.category && p.category.toLowerCase() === category\n        );\n\n  return (\n    <div className=\"product-page\">\n      <CategoryBar setCategory={handleCategoryChange} />\n\n      <div className=\"product-grid\">\n        {filteredProducts.length > 0 ? (\n          filteredProducts.map((product) => (\n            <ProductCard key={product._id} product={product} />\n          ))\n        ) : (\n          <p className=\"no-products\">No products found</p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACjC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAE/C,KAAM,CAAAc,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAc,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9B,mCACAH,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,MAAM,CAAG,GAAI,CAAAC,eAAe,CAACH,QAAQ,CAACI,MAAM,CAAC,CACnD,KAAM,CAAAC,GAAG,CAAGH,MAAM,CAACI,GAAG,CAAC,UAAU,CAAC,CAElC,GAAID,GAAG,CAAE,CACPN,WAAW,CAACM,GAAG,CAACE,WAAW,CAAC,CAAC,CAAC,CAChC,CAAC,IAAM,CACLR,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CAAE,CAACC,QAAQ,CAACI,MAAM,CAAC,CAAC,CAErB,uBACAnB,SAAS,CAAC,IAAM,CACduB,KAAK,CAAC,oCAAoC,CAAC,CACxCC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAKf,WAAW,CAACe,IAAI,CAAC,CAAC,CACjCC,KAAK,CAAC,IAAMhB,WAAW,CAAC,EAAE,CAAC,CAAC,CACjC,CAAC,CAAE,EAAE,CAAC,CAEN,mCACA,KAAM,CAAAiB,oBAAoB,CAAIT,GAAG,EAAK,CACpCN,WAAW,CAACM,GAAG,CAAC,CAChB,GAAIA,GAAG,GAAK,KAAK,CAAE,CACjBJ,QAAQ,CAAC,WAAW,CAAC,CACvB,CAAC,IAAM,CACLA,QAAQ,uBAAAc,MAAA,CAAuBV,GAAG,CAAE,CAAC,CACvC,CACF,CAAC,CAED,qCACA,KAAM,CAAAW,gBAAgB,CACpBlB,QAAQ,GAAK,KAAK,CACdF,QAAQ,CACRA,QAAQ,CAACqB,MAAM,CACZC,CAAC,EAAKA,CAAC,CAACpB,QAAQ,EAAIoB,CAAC,CAACpB,QAAQ,CAACS,WAAW,CAAC,CAAC,GAAKT,QACpD,CAAC,CAEP,mBACEJ,KAAA,QAAKyB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B5B,IAAA,CAACF,WAAW,EAACS,WAAW,CAAEe,oBAAqB,CAAE,CAAC,cAElDtB,IAAA,QAAK2B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BJ,gBAAgB,CAACK,MAAM,CAAG,CAAC,CAC1BL,gBAAgB,CAACM,GAAG,CAAEC,OAAO,eAC3B/B,IAAA,CAACH,WAAW,EAAmBkC,OAAO,CAAEA,OAAQ,EAA9BA,OAAO,CAACC,GAAwB,CACnD,CAAC,cAEFhC,IAAA,MAAG2B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,mBAAiB,CAAG,CAChD,CACE,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}